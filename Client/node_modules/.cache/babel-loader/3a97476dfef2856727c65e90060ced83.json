{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import PostThumb from'../PostThumb';import LoadIcon from'../../images/loading.gif';import LoadMoreBtn from'../LoadMoreBtn';import{getDataAPI}from'../../utils/fetchData';import{GLOBALTYPES}from'../../redux/actions/globalTypes';var Saved=function Saved(_ref){var auth=_ref.auth,dispatch=_ref.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),savePosts=_useState2[0],setSavePosts=_useState2[1];var _useState3=useState(9),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState(2),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];useEffect(function(){setLoad(true);getDataAPI('getSavePosts',auth.token).then(function(res){setSavePosts(res.data.savePosts);setResult(res.data.result);setLoad(false);}).catch(function(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});});return function(){return setSavePosts([]);};},[auth.token,dispatch]);var handleLoadMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"getSavePosts?limit=\".concat(page*9),auth.token);case 3:res=_context.sent;setSavePosts(res.data.savePosts);setResult(res.data.result);setPage(page+1);setLoad(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PostThumb,{posts:savePosts,result:result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"loading\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:result,page:page,load:load,handleLoadMore:handleLoadMore})]});};export default Saved;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/components/profile/Saved.js"],"names":["React","useState","useEffect","PostThumb","LoadIcon","LoadMoreBtn","getDataAPI","GLOBALTYPES","Saved","auth","dispatch","savePosts","setSavePosts","result","setResult","page","setPage","load","setLoad","token","then","res","data","catch","err","type","ALERT","payload","error","response","msg","handleLoadMore"],"mappings":"2jBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,WAAT,KAA4B,iCAA5B,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAsB,IAApBC,CAAAA,IAAoB,MAApBA,IAAoB,CAAdC,QAAc,MAAdA,QAAc,eACET,QAAQ,CAAC,EAAD,CADV,wCACzBU,SADyB,eACdC,YADc,8BAEJX,QAAQ,CAAC,CAAD,CAFJ,yCAEzBY,MAFyB,eAEjBC,SAFiB,8BAGRb,QAAQ,CAAC,CAAD,CAHA,yCAGzBc,IAHyB,eAGnBC,OAHmB,8BAIRf,QAAQ,CAAC,KAAD,CAJA,yCAIzBgB,IAJyB,eAInBC,OAJmB,eAMhChB,SAAS,CAAC,UAAM,CACZgB,OAAO,CAAC,IAAD,CAAP,CACAZ,UAAU,CAAC,cAAD,CAAiBG,IAAI,CAACU,KAAtB,CAAV,CACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACTT,YAAY,CAACS,GAAG,CAACC,IAAJ,CAASX,SAAV,CAAZ,CACAG,SAAS,CAACO,GAAG,CAACC,IAAJ,CAAST,MAAV,CAAT,CACAK,OAAO,CAAC,KAAD,CAAP,CACH,CALD,EAMCK,KAND,CAMO,SAAAC,GAAG,CAAI,CACVd,QAAQ,CAAC,CAACe,IAAI,CAAElB,WAAW,CAACmB,KAAnB,CAA0BC,OAAO,CAAE,CAACC,KAAK,CAAEJ,GAAG,CAACK,QAAJ,CAAaP,IAAb,CAAkBQ,GAA1B,CAAnC,CAAD,CAAR,CACH,CARD,EAUA,MAAO,kBAAMlB,CAAAA,YAAY,CAAC,EAAD,CAAlB,EAAP,CACH,CAbQ,CAaP,CAACH,IAAI,CAACU,KAAN,CAAaT,QAAb,CAbO,CAAT,CAeA,GAAMqB,CAAAA,cAAc,2FAAG,2IACnBb,OAAO,CAAC,IAAD,CAAP,CADmB,sBAEDZ,CAAAA,UAAU,8BAAuBS,IAAI,CAAG,CAA9B,EAAmCN,IAAI,CAACU,KAAxC,CAFT,QAEbE,GAFa,eAGnBT,YAAY,CAACS,GAAG,CAACC,IAAJ,CAASX,SAAV,CAAZ,CACAG,SAAS,CAACO,GAAG,CAACC,IAAJ,CAAST,MAAV,CAAT,CACAG,OAAO,CAACD,IAAI,CAAG,CAAR,CAAP,CACAG,OAAO,CAAC,KAAD,CAAP,CANmB,sDAAH,kBAAda,CAAAA,cAAc,2CAApB,CASA,mBACI,oCACI,KAAC,SAAD,EAAW,KAAK,CAAEpB,SAAlB,CAA6B,MAAM,CAAEE,MAArC,EADJ,CAIQI,IAAI,eAAI,YAAK,GAAG,CAAEb,QAAV,CAAoB,GAAG,CAAC,SAAxB,CAAkC,SAAS,CAAC,iBAA5C,EAJhB,cAQI,KAAC,WAAD,EAAa,MAAM,CAAES,MAArB,CAA6B,IAAI,CAAEE,IAAnC,CACA,IAAI,CAAEE,IADN,CACY,cAAc,CAAEc,cAD5B,EARJ,GADJ,CAcH,CA5CD,CA8CA,cAAevB,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport PostThumb from '../PostThumb'\nimport LoadIcon from '../../images/loading.gif'\nimport LoadMoreBtn from '../LoadMoreBtn'\nimport { getDataAPI } from '../../utils/fetchData'\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\n\nconst Saved = ({auth, dispatch}) => {\n    const [savePosts, setSavePosts] = useState([])\n    const [result, setResult] = useState(9)\n    const [page, setPage] = useState(2)\n    const [load, setLoad] = useState(false)\n\n    useEffect(() => {\n        setLoad(true)\n        getDataAPI('getSavePosts', auth.token)\n        .then(res => {\n            setSavePosts(res.data.savePosts)\n            setResult(res.data.result)\n            setLoad(false)\n        })\n        .catch(err => {\n            dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\n        })\n\n        return () => setSavePosts([])\n    },[auth.token, dispatch])\n\n    const handleLoadMore = async () => {\n        setLoad(true)\n        const res = await getDataAPI(`getSavePosts?limit=${page * 9}`, auth.token)\n        setSavePosts(res.data.savePosts)\n        setResult(res.data.result)\n        setPage(page + 1)\n        setLoad(false)\n    }\n\n    return (\n        <div>\n            <PostThumb posts={savePosts} result={result} />\n\n            {\n                load && <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto\" />\n            }\n\n            \n            <LoadMoreBtn result={result} page={page}\n            load={load} handleLoadMore={handleLoadMore} />\n            \n        </div>\n    )\n}\n\nexport default Saved\n"]},"metadata":{},"sourceType":"module"}