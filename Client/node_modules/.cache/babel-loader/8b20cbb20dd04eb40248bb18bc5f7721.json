{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{useSelector,useDispatch}from'react-redux';import NoNotice from'../images/notice.png';import{Link}from'react-router-dom';import Avatar from'./Avatar';import moment from'moment';import{isReadNotify,NOTIFY_TYPES,deleteAllNotifies}from'../redux/actions/notifyAction';var NotifyModal=function NotifyModal(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,notify=_useSelector.notify;var dispatch=useDispatch();var handleIsRead=function handleIsRead(msg){dispatch(isReadNotify({msg:msg,auth:auth}));};var handleSound=function handleSound(){dispatch({type:NOTIFY_TYPES.UPDATE_SOUND,payload:!notify.sound});};var handleDeleteAll=function handleDeleteAll(){var newArr=notify.data.filter(function(item){return item.isRead===false;});if(newArr.length===0)return dispatch(deleteAllNotifies(auth.token));if(window.confirm(\"You have \".concat(newArr.length,\" unread notices. Are you sure you want to delete all?\"))){return dispatch(deleteAllNotifies(auth.token));}};return/*#__PURE__*/_jsxs(\"div\",{style:{minWidth:'300px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center px-3\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notification\"}),notify.sound?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell text-danger\",style:{fontSize:'1.2rem',cursor:'pointer'},onClick:handleSound}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell-slash text-danger\",style:{fontSize:'1.2rem',cursor:'pointer'},onClick:handleSound})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-0\"}),notify.data.length===0&&/*#__PURE__*/_jsx(\"img\",{src:NoNotice,alt:\"NoNotice\",className:\"w-100\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'calc(100vh - 200px)',overflow:'auto'},children:notify.data.map(function(msg,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 mb-3\",children:[/*#__PURE__*/_jsxs(Link,{to:\"\".concat(msg.url),className:\"d-flex text-dark align-items-center\",onClick:function onClick(){return handleIsRead(msg);},children:[/*#__PURE__*/_jsx(Avatar,{src:msg.user.avatar,size:\"big-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-1 flex-fill\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"mr-1\",children:msg.user.username}),/*#__PURE__*/_jsx(\"span\",{children:msg.text})]}),msg.content&&/*#__PURE__*/_jsxs(\"small\",{children:[msg.content.slice(0,20),\"...\"]})]}),msg.image&&/*#__PURE__*/_jsx(\"div\",{style:{width:'30px'},children:msg.image.match(/video/i)?/*#__PURE__*/_jsx(\"video\",{src:msg.image,width:\"100%\"}):/*#__PURE__*/_jsx(Avatar,{src:msg.image,size:\"medium-avatar\"})})]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-flex justify-content-between px-2\",children:[moment(msg.createdAt).fromNow(),!msg.isRead&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-circle text-primary\"})]})]},index);})}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right text-danger mr-2\",style:{cursor:'pointer'},onClick:handleDeleteAll,children:\"Delete All\"})]});};export default NotifyModal;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/components/NotifyModal.js"],"names":["React","useSelector","useDispatch","NoNotice","Link","Avatar","moment","isReadNotify","NOTIFY_TYPES","deleteAllNotifies","NotifyModal","state","auth","notify","dispatch","handleIsRead","msg","handleSound","type","UPDATE_SOUND","payload","sound","handleDeleteAll","newArr","data","filter","item","isRead","length","token","window","confirm","minWidth","fontSize","cursor","maxHeight","overflow","map","index","url","user","avatar","username","text","content","slice","image","width","match","createdAt","fromNow"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport NoNotice from '../images/notice.png'\nimport { Link } from 'react-router-dom'\nimport Avatar from './Avatar'\nimport moment from 'moment'\nimport { isReadNotify, NOTIFY_TYPES, deleteAllNotifies } from '../redux/actions/notifyAction'\n\nconst NotifyModal = () => {\n    const { auth, notify } = useSelector(state => state)\n    const dispatch = useDispatch()\n\n    const handleIsRead = (msg) => {\n        dispatch(isReadNotify({msg, auth}))\n    }\n\n    const handleSound = () => {\n        dispatch({type: NOTIFY_TYPES.UPDATE_SOUND, payload: !notify.sound})\n    }\n\n    const handleDeleteAll = () => {\n        const newArr = notify.data.filter(item => item.isRead === false)\n        if(newArr.length === 0) return dispatch(deleteAllNotifies(auth.token))\n\n        if(window.confirm(`You have ${newArr.length} unread notices. Are you sure you want to delete all?`)){\n            return dispatch(deleteAllNotifies(auth.token))\n        }\n    }\n\n    return (\n        <div style={{minWidth: '300px'}}>\n            <div className=\"d-flex justify-content-between align-items-center px-3\">\n                <h3>Notification</h3>\n                {\n                    notify.sound \n                    ? <i className=\"fas fa-bell text-danger\" \n                    style={{fontSize: '1.2rem', cursor: 'pointer'}}\n                    onClick={handleSound} />\n\n                    : <i className=\"fas fa-bell-slash text-danger\"\n                    style={{fontSize: '1.2rem', cursor: 'pointer'}}\n                    onClick={handleSound} />\n                }\n            </div>\n            <hr className=\"mt-0\" />\n\n            {\n                notify.data.length === 0 &&\n                <img src={NoNotice} alt=\"NoNotice\" className=\"w-100\" />\n            }\n\n            <div style={{maxHeight: 'calc(100vh - 200px)', overflow: 'auto'}}>\n                {\n                    notify.data.map((msg, index) => (\n                        <div key={index} className=\"px-2 mb-3\" >\n                            <Link to={`${msg.url}`} className=\"d-flex text-dark align-items-center\"\n                            onClick={() => handleIsRead(msg)}>\n                                <Avatar src={msg.user.avatar} size=\"big-avatar\" />\n\n                                <div className=\"mx-1 flex-fill\">\n                                    <div>\n                                        <strong className=\"mr-1\">{msg.user.username}</strong>\n                                        <span>{msg.text}</span>\n                                    </div>\n                                    {msg.content && <small>{msg.content.slice(0,20)}...</small>}\n                                </div>\n\n                                {\n                                    msg.image &&\n                                    <div style={{width: '30px'}}>\n                                        {\n                                            msg.image.match(/video/i)\n                                            ? <video src={msg.image} width=\"100%\" />\n                                            : <Avatar src={msg.image} size=\"medium-avatar\" />\n                                        }\n                                    </div>\n                                }\n                                \n                            </Link>\n                            <small className=\"text-muted d-flex justify-content-between px-2\">\n                                {moment(msg.createdAt).fromNow()}\n                                {\n                                    !msg.isRead && <i className=\"fas fa-circle text-primary\" />\n                                }\n                            </small>\n                        </div>\n                    ))\n                }\n\n            </div>\n\n            <hr className=\"my-1\" />\n            <div className=\"text-right text-danger mr-2\" style={{cursor: 'pointer'}}\n            onClick={handleDeleteAll}>\n                Delete All\n            </div>\n\n        </div>\n    )\n}\n\nexport default NotifyModal\n"]},"metadata":{},"sourceType":"module"}