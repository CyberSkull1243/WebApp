{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useSelector,useDispatch}from'react-redux';import PostCard from'../PostCard';import LoadIcon from'../../images/loading.gif';import LoadMoreBtn from'../LoadMoreBtn';import{getDataAPI}from'../../utils/fetchData';import{POST_TYPES}from'../../redux/actions/postAction';var Posts=function Posts(){var _useSelector=useSelector(function(state){return state;}),homePosts=_useSelector.homePosts,auth=_useSelector.auth,theme=_useSelector.theme;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];var handleLoadMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"posts?limit=\".concat(homePosts.page*9),auth.token);case 3:res=_context.sent;dispatch({type:POST_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},res.data),{},{page:homePosts.page+1})});setLoad(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[homePosts.posts.map(function(post){return/*#__PURE__*/_jsx(PostCard,{post:post,theme:theme},post._id);}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"loading\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:homePosts.result,page:homePosts.page,load:load,handleLoadMore:handleLoadMore})]});};export default Posts;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/components/home/Posts.js"],"names":["React","useState","useSelector","useDispatch","PostCard","LoadIcon","LoadMoreBtn","getDataAPI","POST_TYPES","Posts","state","homePosts","auth","theme","dispatch","load","setLoad","handleLoadMore","page","token","res","type","GET_POSTS","payload","data","posts","map","post","_id","result"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,UAAT,KAA2B,gCAA3B,CAGA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,kBACmBP,WAAW,CAAC,SAAAQ,KAAK,QAAIA,CAAAA,KAAJ,EAAN,CAD9B,CACRC,SADQ,cACRA,SADQ,CACGC,IADH,cACGA,IADH,CACSC,KADT,cACSA,KADT,CAEhB,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAFgB,cAIQF,QAAQ,CAAC,KAAD,CAJhB,wCAITc,IAJS,eAIHC,OAJG,eAMhB,GAAMC,CAAAA,cAAc,0FAAG,2IACnBD,OAAO,CAAC,IAAD,CAAP,CADmB,sBAEDT,CAAAA,UAAU,uBAAgBI,SAAS,CAACO,IAAV,CAAiB,CAAjC,EAAsCN,IAAI,CAACO,KAA3C,CAFT,QAEbC,GAFa,eAInBN,QAAQ,CAAC,CACLO,IAAI,CAAEb,UAAU,CAACc,SADZ,CAELC,OAAO,gCAAMH,GAAG,CAACI,IAAV,MAAgBN,IAAI,CAAEP,SAAS,CAACO,IAAV,CAAiB,CAAvC,EAFF,CAAD,CAAR,CAKAF,OAAO,CAAC,KAAD,CAAP,CATmB,sDAAH,kBAAdC,CAAAA,cAAc,0CAApB,CAYA,mBACI,aAAK,SAAS,CAAC,OAAf,WAEQN,SAAS,CAACc,KAAV,CAAgBC,GAAhB,CAAoB,SAAAC,IAAI,qBACpB,KAAC,QAAD,EAAyB,IAAI,CAAEA,IAA/B,CAAqC,KAAK,CAAEd,KAA5C,EAAec,IAAI,CAACC,GAApB,CADoB,EAAxB,CAFR,CAQQb,IAAI,eAAI,YAAK,GAAG,CAAEV,QAAV,CAAoB,GAAG,CAAC,SAAxB,CAAkC,SAAS,CAAC,iBAA5C,EARhB,cAYI,KAAC,WAAD,EAAa,MAAM,CAAEM,SAAS,CAACkB,MAA/B,CAAuC,IAAI,CAAElB,SAAS,CAACO,IAAvD,CACA,IAAI,CAAEH,IADN,CACY,cAAc,CAAEE,cAD5B,EAZJ,GADJ,CAiBH,CAnCD,CAqCA,cAAeR,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport PostCard from '../PostCard'\n\nimport LoadIcon from '../../images/loading.gif'\nimport LoadMoreBtn from '../LoadMoreBtn'\nimport { getDataAPI } from '../../utils/fetchData'\nimport { POST_TYPES } from '../../redux/actions/postAction'\n\n\nconst Posts = () => {\n    const { homePosts, auth, theme } = useSelector(state => state)\n    const dispatch = useDispatch()\n\n    const [load, setLoad] = useState(false)\n\n    const handleLoadMore = async () => {\n        setLoad(true)\n        const res = await getDataAPI(`posts?limit=${homePosts.page * 9}`, auth.token)\n\n        dispatch({\n            type: POST_TYPES.GET_POSTS, \n            payload: {...res.data, page: homePosts.page + 1}\n        })\n\n        setLoad(false)\n    }\n\n    return (\n        <div className=\"posts\">\n            {\n                homePosts.posts.map(post => (\n                    <PostCard key={post._id} post={post} theme={theme} />\n                ))\n            }\n\n            {\n                load && <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto\" />\n            }\n\n            \n            <LoadMoreBtn result={homePosts.result} page={homePosts.page}\n            load={load} handleLoadMore={handleLoadMore} />\n        </div>\n    )\n}\n\nexport default Posts\n"]},"metadata":{},"sourceType":"module"}