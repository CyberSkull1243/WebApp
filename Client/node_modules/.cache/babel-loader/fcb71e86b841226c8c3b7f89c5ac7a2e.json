{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useSelector,useDispatch}from'react-redux';import{getDataAPI}from'../../utils/fetchData';import{GLOBALTYPES}from'../../redux/actions/globalTypes';import UserCard from'../UserCard';import LoadIcon from'../../images/loading.gif';var Search=function Search(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var handleSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(search){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.prev=3;setLoad(true);_context.next=7;return getDataAPI(\"search?username=\".concat(search),auth.token);case 7:res=_context.sent;setUsers(res.data.users);setLoad(false);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,12]]);}));return function handleSearch(_x){return _ref.apply(this,arguments);};}();var handleClose=function handleClose(){setSearch('');setUsers([]);};return/*#__PURE__*/_jsxs(\"form\",{className:\"search_form\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",value:search,id:\"search\",title:\"Enter to Search\",onChange:function onChange(e){return setSearch(e.target.value.toLowerCase().replace(/ /g,''));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_icon\",style:{opacity:search?0:0.3},children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Enter to Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"close_search\",onClick:handleClose,style:{opacity:users.length===0?0:1},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{display:'none'},children:\"Search\"}),load&&/*#__PURE__*/_jsx(\"img\",{className:\"loading\",src:LoadIcon,alt:\"loading\"}),/*#__PURE__*/_jsx(\"div\",{className:\"users\",children:search&&users.map(function(user){return/*#__PURE__*/_jsx(UserCard,{user:user,border:\"border\",handleClose:handleClose},user._id);})})]});};export default Search;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/components/header/Search.js"],"names":["React","useState","useSelector","useDispatch","getDataAPI","GLOBALTYPES","UserCard","LoadIcon","Search","search","setSearch","users","setUsers","state","auth","dispatch","load","setLoad","handleSearch","e","preventDefault","token","res","data","type","ALERT","payload","error","response","msg","handleClose","target","value","toLowerCase","replace","opacity","length","display","map","user","_id"],"mappings":"2jBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,WAAT,KAA4B,iCAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,eACWP,QAAQ,CAAC,EAAD,CADnB,wCACVQ,MADU,eACFC,SADE,8BAEST,QAAQ,CAAC,EAAD,CAFjB,yCAEVU,KAFU,eAEHC,QAFG,gCAIAV,WAAW,CAAC,SAAAW,KAAK,QAAIA,CAAAA,KAAJ,EAAN,CAJX,CAITC,IAJS,cAITA,IAJS,CAKjB,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CALiB,eAMOF,QAAQ,CAAC,KAAD,CANf,yCAMVe,IANU,eAMJC,OANI,eASjB,GAAMC,CAAAA,YAAY,0FAAG,iBAAOC,CAAP,0HACjBA,CAAC,CAACC,cAAF,GADiB,GAEbX,MAFa,iFAKbQ,OAAO,CAAC,IAAD,CAAP,CALa,sBAMKb,CAAAA,UAAU,2BAAoBK,MAApB,EAA8BK,IAAI,CAACO,KAAnC,CANf,QAMPC,GANO,eAObV,QAAQ,CAACU,GAAG,CAACC,IAAJ,CAASZ,KAAV,CAAR,CACAM,OAAO,CAAC,KAAD,CAAP,CARa,iFAUbF,QAAQ,CAAC,CACLS,IAAI,CAAEnB,WAAW,CAACoB,KADb,CACoBC,OAAO,CAAE,CAACC,KAAK,CAAE,YAAIC,QAAJ,CAAaL,IAAb,CAAkBM,GAA1B,CAD7B,CAAD,CAAR,CAVa,qEAAH,kBAAZX,CAAAA,YAAY,4CAAlB,CAgBA,GAAMY,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBpB,SAAS,CAAC,EAAD,CAAT,CACAE,QAAQ,CAAC,EAAD,CAAR,CACH,CAHD,CAKA,mBACI,cAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEM,YAAxC,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,QAAxB,CAAiC,KAAK,CAAET,MAAxC,CAAgD,EAAE,CAAC,QAAnD,CAA4D,KAAK,CAAC,iBAAlE,CACA,QAAQ,CAAE,kBAAAU,CAAC,QAAIT,CAAAA,SAAS,CAACS,CAAC,CAACY,MAAF,CAASC,KAAT,CAAeC,WAAf,GAA6BC,OAA7B,CAAqC,IAArC,CAA2C,EAA3C,CAAD,CAAb,EADX,EADJ,cAII,aAAK,SAAS,CAAC,aAAf,CAA6B,KAAK,CAAE,CAACC,OAAO,CAAE1B,MAAM,CAAG,CAAH,CAAO,GAAvB,CAApC,wBACI,aAAM,SAAS,CAAC,gBAAhB,oBADJ,cAEI,yCAFJ,GAJJ,cASI,YAAK,SAAS,CAAC,cAAf,CAA8B,OAAO,CAAEqB,WAAvC,CACA,KAAK,CAAE,CAACK,OAAO,CAAExB,KAAK,CAACyB,MAAN,GAAiB,CAAjB,CAAqB,CAArB,CAAyB,CAAnC,CADP,kBATJ,cAcI,eAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAE,CAACC,OAAO,CAAE,MAAV,CAA7B,oBAdJ,CAgBMrB,IAAI,eAAI,YAAK,SAAS,CAAC,SAAf,CAAyB,GAAG,CAAET,QAA9B,CAAwC,GAAG,CAAC,SAA5C,EAhBd,cAkBI,YAAK,SAAS,CAAC,OAAf,UAEQE,MAAM,EAAIE,KAAK,CAAC2B,GAAN,CAAU,SAAAC,IAAI,qBACpB,KAAC,QAAD,EAEA,IAAI,CAAEA,IAFN,CAGA,MAAM,CAAC,QAHP,CAIA,WAAW,CAAET,WAJb,EACKS,IAAI,CAACC,GADV,CADoB,EAAd,CAFlB,EAlBJ,GADJ,CAiCH,CA/DD,CAiEA,cAAehC,CAAAA,MAAf","sourcesContent":["import React, { useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { getDataAPI } from '../../utils/fetchData'\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\nimport UserCard from '../UserCard'\nimport LoadIcon from '../../images/loading.gif'\n\nconst Search = () => {\n    const [search, setSearch] = useState('')\n    const [users, setUsers] = useState([])\n\n    const { auth } = useSelector(state => state)\n    const dispatch = useDispatch()\n    const [load, setLoad] = useState(false)\n\n\n    const handleSearch = async (e) => {\n        e.preventDefault()\n        if(!search) return;\n\n        try {\n            setLoad(true)\n            const res = await getDataAPI(`search?username=${search}`, auth.token)\n            setUsers(res.data.users)\n            setLoad(false)\n        } catch (err) {\n            dispatch({\n                type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}\n            })\n        }\n    }\n\n    const handleClose = () => {\n        setSearch('')\n        setUsers([])\n    }\n\n    return (\n        <form className=\"search_form\" onSubmit={handleSearch}>\n            <input type=\"text\" name=\"search\" value={search} id=\"search\" title=\"Enter to Search\"\n            onChange={e => setSearch(e.target.value.toLowerCase().replace(/ /g, ''))} />\n\n            <div className=\"search_icon\" style={{opacity: search ? 0 : 0.3}}>\n                <span className=\"material-icons\">search</span>\n                <span>Enter to Search</span>\n            </div>\n\n            <div className=\"close_search\" onClick={handleClose}\n            style={{opacity: users.length === 0 ? 0 : 1}} >\n                &times;\n            </div>\n\n            <button type=\"submit\" style={{display: 'none'}}>Search</button>\n\n            { load && <img className=\"loading\" src={LoadIcon} alt=\"loading\"  /> }\n\n            <div className=\"users\">\n                {\n                    search && users.map(user => (\n                        <UserCard \n                        key={user._id} \n                        user={user} \n                        border=\"border\"\n                        handleClose={handleClose} \n                        />\n                    ))\n                }\n            </div>\n        </form>\n    )\n}\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}