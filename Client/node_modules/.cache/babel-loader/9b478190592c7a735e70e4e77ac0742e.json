{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{follow,unfollow}from'../redux/actions/profileAction';var FollowBtn=function FollowBtn(_ref){var user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),followed=_useState2[0],setFollowed=_useState2[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,profile=_useSelector.profile,socket=_useSelector.socket;var dispatch=useDispatch();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];useEffect(function(){if(auth.user.following.find(function(item){return item._id===user._id;})){setFollowed(true);}return function(){return setFollowed(false);};},[auth.user.following,user._id]);var handleFollow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!load){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setFollowed(true);setLoad(true);_context.next=6;return dispatch(follow({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleFollow(){return _ref2.apply(this,arguments);};}();var handleUnFollow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!load){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setFollowed(false);setLoad(true);_context2.next=6;return dispatch(unfollow({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUnFollow(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:followed?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger\",onClick:handleUnFollow,children:\"UnFollow\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-info\",onClick:handleFollow,children:\"Follow\"})});};export default FollowBtn;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/components/FollowBtn.js"],"names":["React","useState","useEffect","useSelector","useDispatch","follow","unfollow","FollowBtn","user","followed","setFollowed","state","auth","profile","socket","dispatch","load","setLoad","following","find","item","_id","handleFollow","users","handleUnFollow"],"mappings":"mkBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,MAAT,CAAiBC,QAAjB,KAAiC,gCAAjC,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAY,IAAVC,CAAAA,IAAU,MAAVA,IAAU,eACMP,QAAQ,CAAC,KAAD,CADd,wCACnBQ,QADmB,eACTC,WADS,gCAGQP,WAAW,CAAC,SAAAQ,KAAK,QAAIA,CAAAA,KAAJ,EAAN,CAHnB,CAGlBC,IAHkB,cAGlBA,IAHkB,CAGZC,OAHY,cAGZA,OAHY,CAGHC,MAHG,cAGHA,MAHG,CAI1B,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAJ0B,eAMFH,QAAQ,CAAC,KAAD,CANN,yCAMnBe,IANmB,eAMbC,OANa,eAQ1Bf,SAAS,CAAC,UAAM,CACZ,GAAGU,IAAI,CAACJ,IAAL,CAAUU,SAAV,CAAoBC,IAApB,CAAyB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,GAAL,GAAab,IAAI,CAACa,GAAtB,EAA7B,CAAH,CAA2D,CACvDX,WAAW,CAAC,IAAD,CAAX,CACH,CACD,MAAO,kBAAMA,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAAP,CACH,CALQ,CAKN,CAACE,IAAI,CAACJ,IAAL,CAAUU,SAAX,CAAsBV,IAAI,CAACa,GAA3B,CALM,CAAT,CAOA,GAAMC,CAAAA,YAAY,2FAAI,uIACfN,IADe,iEAGlBN,WAAW,CAAC,IAAD,CAAX,CACAO,OAAO,CAAC,IAAD,CAAP,CAJkB,sBAKZF,CAAAA,QAAQ,CAACV,MAAM,CAAC,CAACkB,KAAK,CAAEV,OAAO,CAACU,KAAhB,CAAuBf,IAAI,CAAJA,IAAvB,CAA6BI,IAAI,CAAJA,IAA7B,CAAmCE,MAAM,CAANA,MAAnC,CAAD,CAAP,CALI,QAMlBG,OAAO,CAAC,KAAD,CAAP,CANkB,sDAAJ,kBAAZK,CAAAA,YAAY,2CAAlB,CASA,GAAME,CAAAA,cAAc,2FAAG,4IAChBR,IADgB,mEAGnBN,WAAW,CAAC,KAAD,CAAX,CACAO,OAAO,CAAC,IAAD,CAAP,CAJmB,uBAKbF,CAAAA,QAAQ,CAACT,QAAQ,CAAC,CAACiB,KAAK,CAAEV,OAAO,CAACU,KAAhB,CAAuBf,IAAI,CAAJA,IAAvB,CAA6BI,IAAI,CAAJA,IAA7B,CAAmCE,MAAM,CAANA,MAAnC,CAAD,CAAT,CALK,QAMnBG,OAAO,CAAC,KAAD,CAAP,CANmB,wDAAH,kBAAdO,CAAAA,cAAc,2CAApB,CASA,mBACI,yBAEIf,QAAQ,cACN,eAAQ,SAAS,CAAC,wBAAlB,CACF,OAAO,CAAEe,cADP,sBADM,cAKN,eAAQ,SAAS,CAAC,sBAAlB,CACF,OAAO,CAAEF,YADP,oBAPN,EADJ,CAeH,CAhDD,CAkDA,cAAef,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { follow, unfollow } from '../redux/actions/profileAction'\n\nconst FollowBtn = ({user}) => {\n    const [followed, setFollowed] = useState(false)\n\n    const { auth, profile, socket } = useSelector(state => state)\n    const dispatch = useDispatch()\n\n    const [load, setLoad] = useState(false)\n\n    useEffect(() => {\n        if(auth.user.following.find(item => item._id === user._id)){\n            setFollowed(true)\n        }\n        return () => setFollowed(false)\n    }, [auth.user.following, user._id])\n\n    const handleFollow =  async () => {\n        if(load) return;\n\n        setFollowed(true)\n        setLoad(true)\n        await dispatch(follow({users: profile.users, user, auth, socket}))\n        setLoad(false)\n    }\n\n    const handleUnFollow = async () => {\n        if(load) return;\n\n        setFollowed(false)\n        setLoad(true)\n        await dispatch(unfollow({users: profile.users, user, auth, socket}))\n        setLoad(false)\n    }\n\n    return (\n        <>\n        {\n            followed\n            ? <button className=\"btn btn-outline-danger\"\n            onClick={handleUnFollow}>\n                UnFollow\n            </button>\n            : <button className=\"btn btn-outline-info\"\n            onClick={handleFollow}>\n                Follow\n            </button>\n        }\n        </>\n    )\n}\n\nexport default FollowBtn\n"]},"metadata":{},"sourceType":"module"}