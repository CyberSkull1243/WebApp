{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{useEffect}from'react';import{BrowserRouter as Router,Route}from'react-router-dom';import PageRender from'./customRouter/PageRender';import PrivateRouter from'./customRouter/PrivateRouter';import Home from'./pages/home';import Login from'./pages/login';import Register from'./pages/register';import Alert from'./components/alert/Alert';import Header from'./components/header/Header';import StatusModal from'./components/StatusModal';import{useSelector,useDispatch}from'react-redux';import{refreshToken}from'./redux/actions/authAction';import{getPosts}from'./redux/actions/postAction';import{getSuggestions}from'./redux/actions/suggestionsAction';import io from'socket.io-client';import{GLOBALTYPES}from'./redux/actions/globalTypes';import SocketClient from'./SocketClient';import{getNotifies}from'./redux/actions/notifyAction';import CallModal from'./components/message/CallModal';import Peer from'peerjs';function App(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,status=_useSelector.status,modal=_useSelector.modal,call=_useSelector.call;var dispatch=useDispatch();useEffect(function(){dispatch(refreshToken());var socket=io();dispatch({type:GLOBALTYPES.SOCKET,payload:socket});return function(){return socket.close();};},[dispatch]);useEffect(function(){if(auth.token){dispatch(getPosts(auth.token));dispatch(getSuggestions(auth.token));dispatch(getNotifies(auth.token));}},[dispatch,auth.token]);useEffect(function(){if(!(\"Notification\"in window)){alert(\"This browser does not support desktop notification\");}else if(Notification.permission===\"granted\"){}else if(Notification.permission!==\"denied\"){Notification.requestPermission().then(function(permission){if(permission===\"granted\"){}});}},[]);useEffect(function(){var newPeer=new Peer(undefined,{path:'/',secure:true});dispatch({type:GLOBALTYPES.PEER,payload:newPeer});},[dispatch]);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Alert,{}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"theme\"}),/*#__PURE__*/_jsx(\"div\",{className:\"App \".concat((status||modal)&&'mode'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[auth.token&&/*#__PURE__*/_jsx(Header,{}),status&&/*#__PURE__*/_jsx(StatusModal,{}),auth.token&&/*#__PURE__*/_jsx(SocketClient,{}),call&&/*#__PURE__*/_jsx(CallModal,{}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:auth.token?Home:Login}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page\",component:PageRender}),/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page/:id\",component:PageRender})]})})]});}export default App;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/App.js"],"names":["useEffect","BrowserRouter","Router","Route","PageRender","PrivateRouter","Home","Login","Register","Alert","Header","StatusModal","useSelector","useDispatch","refreshToken","getPosts","getSuggestions","io","GLOBALTYPES","SocketClient","getNotifies","CallModal","Peer","App","state","auth","status","modal","call","dispatch","socket","type","SOCKET","payload","close","token","window","alert","Notification","permission","requestPermission","then","newPeer","undefined","path","secure","PEER"],"mappings":"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","sourcesContent":["import { useEffect } from 'react'\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\n\nimport PageRender from './customRouter/PageRender'\nimport PrivateRouter from './customRouter/PrivateRouter'\n\nimport Home from './pages/home'\nimport Login from './pages/login'\nimport Register from './pages/register'\n\nimport Alert from './components/alert/Alert'\nimport Header from './components/header/Header'\nimport StatusModal from './components/StatusModal'\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport { refreshToken } from './redux/actions/authAction'\nimport { getPosts } from './redux/actions/postAction'\nimport { getSuggestions } from './redux/actions/suggestionsAction'\n\nimport io from 'socket.io-client'\nimport { GLOBALTYPES } from './redux/actions/globalTypes'\nimport SocketClient from './SocketClient'\n\nimport { getNotifies } from './redux/actions/notifyAction'\nimport CallModal from './components/message/CallModal'\nimport Peer from 'peerjs'\n\nfunction App() {\n  const { auth, status, modal, call } = useSelector(state => state)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(refreshToken())\n\n    const socket = io()\n    dispatch({type: GLOBALTYPES.SOCKET, payload: socket})\n    return () => socket.close()\n  },[dispatch])\n\n  useEffect(() => {\n    if(auth.token) {\n      dispatch(getPosts(auth.token))\n      dispatch(getSuggestions(auth.token))\n      dispatch(getNotifies(auth.token))\n    }\n  }, [dispatch, auth.token])\n\n  \n  useEffect(() => {\n    if (!(\"Notification\" in window)) {\n      alert(\"This browser does not support desktop notification\");\n    }\n    else if (Notification.permission === \"granted\") {}\n    else if (Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(function (permission) {\n        if (permission === \"granted\") {}\n      });\n    }\n  },[])\n\n \n  useEffect(() => {\n    const newPeer = new Peer(undefined, {\n      path: '/', secure: true\n    })\n    \n    dispatch({ type: GLOBALTYPES.PEER, payload: newPeer })\n  },[dispatch])\n\n\n  return (\n    <Router>\n      <Alert />\n\n      <input type=\"checkbox\" id=\"theme\" />\n      <div className={`App ${(status || modal) && 'mode'}`}>\n        <div className=\"main\">\n          {auth.token && <Header />}\n          {status && <StatusModal />}\n          {auth.token && <SocketClient />}\n          {call && <CallModal />}\n          \n          <Route exact path=\"/\" component={auth.token ? Home : Login} />\n          <Route exact path=\"/register\" component={Register} />\n\n          <PrivateRouter exact path=\"/:page\" component={PageRender} />\n          <PrivateRouter exact path=\"/:page/:id\" component={PageRender} />\n          \n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}