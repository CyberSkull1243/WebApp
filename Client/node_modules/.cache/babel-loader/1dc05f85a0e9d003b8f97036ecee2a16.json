{"ast":null,"code":"import _toConsumableArray from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{GLOBALTYPES,DeleteData}from'./globalTypes';import{getDataAPI,patchDataAPI}from'../../utils/fetchData';import{imageUpload}from'../../utils/imageUpload';import{createNotify,removeNotify}from'../actions/notifyAction';export var PROFILE_TYPES={LOADING:'LOADING_PROFILE',GET_USER:'GET_PROFILE_USER',FOLLOW:'FOLLOW',UNFOLLOW:'UNFOLLOW',GET_ID:'GET_PROFILE_ID',GET_POSTS:'GET_PROFILE_POSTS',UPDATE_POST:'UPDATE_PROFILE_POST'};export var getProfileUsers=function getProfileUsers(_ref){var id=_ref.id,auth=_ref.auth;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res,res1,users,posts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:PROFILE_TYPES.GET_ID,payload:id});_context.prev=1;dispatch({type:PROFILE_TYPES.LOADING,payload:true});res=getDataAPI(\"/user/\".concat(id),auth.token);res1=getDataAPI(\"/user_posts/\".concat(id),auth.token);_context.next=7;return res;case 7:users=_context.sent;_context.next=10;return res1;case 10:posts=_context.sent;dispatch({type:PROFILE_TYPES.GET_USER,payload:users.data});dispatch({type:PROFILE_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},posts.data),{},{_id:id,page:2})});dispatch({type:PROFILE_TYPES.LOADING,payload:false});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var updateProfileUser=function updateProfileUser(_ref3){var userData=_ref3.userData,avatar=_ref3.avatar,auth=_ref3.auth;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var media,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(userData.fullname){_context2.next=2;break;}return _context2.abrupt(\"return\",dispatch({type:GLOBALTYPES.ALERT,payload:{error:\"Please add your full name.\"}}));case 2:if(!(userData.fullname.length>25)){_context2.next=4;break;}return _context2.abrupt(\"return\",dispatch({type:GLOBALTYPES.ALERT,payload:{error:\"Your full name too long.\"}}));case 4:if(!(userData.story.length>200)){_context2.next=6;break;}return _context2.abrupt(\"return\",dispatch({type:GLOBALTYPES.ALERT,payload:{error:\"Your story too long.\"}}));case 6:_context2.prev=6;dispatch({type:GLOBALTYPES.ALERT,payload:{loading:true}});if(!avatar){_context2.next=12;break;}_context2.next=11;return imageUpload([avatar]);case 11:media=_context2.sent;case 12:_context2.next=14;return patchDataAPI(\"user\",_objectSpread(_objectSpread({},userData),{},{avatar:avatar?media[0].url:auth.user.avatar}),auth.token);case 14:res=_context2.sent;dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:_objectSpread(_objectSpread(_objectSpread({},auth.user),userData),{},{avatar:avatar?media[0].url:auth.user.avatar})})});dispatch({type:GLOBALTYPES.ALERT,payload:{success:res.data.msg}});_context2.next=22;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](6);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context2.t0.response.data.msg}});case 22:case\"end\":return _context2.stop();}}},_callee2,null,[[6,19]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();};export var follow=function follow(_ref5){var users=_ref5.users,user=_ref5.user,auth=_ref5.auth,socket=_ref5.socket;return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var newUser,res,msg;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(users.every(function(item){return item._id!==user._id;})){newUser=_objectSpread(_objectSpread({},user),{},{followers:[].concat(_toConsumableArray(user.followers),[auth.user])});}else{users.forEach(function(item){if(item._id===user._id){newUser=_objectSpread(_objectSpread({},item),{},{followers:[].concat(_toConsumableArray(item.followers),[auth.user])});}});}dispatch({type:PROFILE_TYPES.FOLLOW,payload:newUser});dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:_objectSpread(_objectSpread({},auth.user),{},{following:[].concat(_toConsumableArray(auth.user.following),[newUser])})})});_context3.prev=3;_context3.next=6;return patchDataAPI(\"user/\".concat(user._id,\"/follow\"),null,auth.token);case 6:res=_context3.sent;socket.emit('follow',res.data.newUser);// Notify\nmsg={id:auth.user._id,text:'has started to follow you.',recipients:[newUser._id],url:\"/profile/\".concat(auth.user._id)};dispatch(createNotify({msg:msg,auth:auth,socket:socket}));_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context3.t0.response.data.msg}});case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[3,12]]);}));return function(_x3){return _ref6.apply(this,arguments);};}();};export var unfollow=function unfollow(_ref7){var users=_ref7.users,user=_ref7.user,auth=_ref7.auth,socket=_ref7.socket;return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var newUser,res,msg;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(users.every(function(item){return item._id!==user._id;})){newUser=_objectSpread(_objectSpread({},user),{},{followers:DeleteData(user.followers,auth.user._id)});}else{users.forEach(function(item){if(item._id===user._id){newUser=_objectSpread(_objectSpread({},item),{},{followers:DeleteData(item.followers,auth.user._id)});}});}dispatch({type:PROFILE_TYPES.UNFOLLOW,payload:newUser});dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:_objectSpread(_objectSpread({},auth.user),{},{following:DeleteData(auth.user.following,newUser._id)})})});_context4.prev=3;_context4.next=6;return patchDataAPI(\"user/\".concat(user._id,\"/unfollow\"),null,auth.token);case 6:res=_context4.sent;socket.emit('unFollow',res.data.newUser);// Notify\nmsg={id:auth.user._id,text:'has started to follow you.',recipients:[newUser._id],url:\"/profile/\".concat(auth.user._id)};dispatch(removeNotify({msg:msg,auth:auth,socket:socket}));_context4.next=15;break;case 12:_context4.prev=12;_context4.t0=_context4[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context4.t0.response.data.msg}});case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[3,12]]);}));return function(_x4){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/redux/actions/profileAction.js"],"names":["GLOBALTYPES","DeleteData","getDataAPI","patchDataAPI","imageUpload","createNotify","removeNotify","PROFILE_TYPES","LOADING","GET_USER","FOLLOW","UNFOLLOW","GET_ID","GET_POSTS","UPDATE_POST","getProfileUsers","id","auth","dispatch","type","payload","res","token","res1","users","posts","data","_id","page","ALERT","error","response","msg","updateProfileUser","userData","avatar","fullname","length","story","loading","media","url","user","AUTH","success","follow","socket","every","item","newUser","followers","forEach","following","emit","text","recipients","unfollow"],"mappings":"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","sourcesContent":["import { GLOBALTYPES, DeleteData } from './globalTypes'\nimport { getDataAPI, patchDataAPI } from '../../utils/fetchData'\nimport { imageUpload } from '../../utils/imageUpload'\nimport { createNotify, removeNotify } from '../actions/notifyAction'\n\n\nexport const PROFILE_TYPES = {\n    LOADING: 'LOADING_PROFILE',\n    GET_USER: 'GET_PROFILE_USER',\n    FOLLOW: 'FOLLOW',\n    UNFOLLOW: 'UNFOLLOW',\n    GET_ID: 'GET_PROFILE_ID',\n    GET_POSTS: 'GET_PROFILE_POSTS',\n    UPDATE_POST: 'UPDATE_PROFILE_POST'\n}\n\n\nexport const getProfileUsers = ({id, auth}) => async (dispatch) => {\n    dispatch({type: PROFILE_TYPES.GET_ID, payload: id})\n\n    try {\n        dispatch({type: PROFILE_TYPES.LOADING, payload: true})\n        const res = getDataAPI(`/user/${id}`, auth.token)\n        const res1 = getDataAPI(`/user_posts/${id}`, auth.token)\n        \n        const users = await res;\n        const posts = await res1;\n\n        dispatch({\n            type: PROFILE_TYPES.GET_USER,\n            payload: users.data\n        })\n\n        dispatch({\n            type: PROFILE_TYPES.GET_POSTS,\n            payload: {...posts.data, _id: id, page: 2}\n        })\n\n        dispatch({type: PROFILE_TYPES.LOADING, payload: false})\n    } catch (err) {\n        dispatch({\n            type: GLOBALTYPES.ALERT, \n            payload: {error: err.response.data.msg}\n        })\n    }\n    \n}\n\n\nexport const updateProfileUser = ({userData, avatar, auth}) => async (dispatch) => {\n    if(!userData.fullname)\n    return dispatch({type: GLOBALTYPES.ALERT, payload: {error: \"Please add your full name.\"}})\n\n    if(userData.fullname.length > 25)\n    return dispatch({type: GLOBALTYPES.ALERT, payload: {error: \"Your full name too long.\"}})\n\n    if(userData.story.length > 200)\n    return dispatch({type: GLOBALTYPES.ALERT, payload: {error: \"Your story too long.\"}})\n\n    try {\n        let media;\n        dispatch({type: GLOBALTYPES.ALERT, payload: {loading: true}})\n\n        if(avatar) media = await imageUpload([avatar])\n\n        const res = await patchDataAPI(\"user\", {\n            ...userData,\n            avatar: avatar ? media[0].url : auth.user.avatar\n        }, auth.token)\n\n        dispatch({\n            type: GLOBALTYPES.AUTH,\n            payload: {\n                ...auth,\n                user: {\n                    ...auth.user, ...userData,\n                    avatar: avatar ? media[0].url : auth.user.avatar,\n                }\n            }\n        })\n\n        dispatch({type: GLOBALTYPES.ALERT, payload: {success: res.data.msg}})\n    } catch (err) {\n        dispatch({\n            type: GLOBALTYPES.ALERT, \n            payload: {error: err.response.data.msg}\n        })\n    }\n}\n\nexport const follow = ({users, user, auth, socket}) => async (dispatch) => {\n    let newUser;\n    \n    if(users.every(item => item._id !== user._id)){\n        newUser = {...user, followers: [...user.followers, auth.user]}\n    }else{\n        users.forEach(item => {\n            if(item._id === user._id){\n                newUser = {...item, followers: [...item.followers, auth.user]}\n            }\n        })\n    }\n\n    dispatch({ type: PROFILE_TYPES.FOLLOW, payload: newUser })\n\n    dispatch({\n        type: GLOBALTYPES.AUTH, \n        payload: {\n            ...auth,\n            user: {...auth.user, following: [...auth.user.following, newUser]}\n        }\n    })\n\n\n    try {\n        const res = await patchDataAPI(`user/${user._id}/follow`, null, auth.token)\n        socket.emit('follow', res.data.newUser)\n\n        // Notify\n        const msg = {\n            id: auth.user._id,\n            text: 'has started to follow you.',\n            recipients: [newUser._id],\n            url: `/profile/${auth.user._id}`,\n        }\n\n        dispatch(createNotify({msg, auth, socket}))\n\n    } catch (err) {\n        dispatch({\n            type: GLOBALTYPES.ALERT, \n            payload: {error: err.response.data.msg}\n        })\n    }\n}\n\nexport const unfollow = ({users, user, auth, socket}) => async (dispatch) => {\n\n    let newUser;\n\n    if(users.every(item => item._id !== user._id)){\n        newUser = {...user, followers: DeleteData(user.followers, auth.user._id)}\n    }else{\n        users.forEach(item => {\n            if(item._id === user._id){\n                newUser = {...item, followers: DeleteData(item.followers, auth.user._id)}\n            }\n        })\n    }\n\n    dispatch({ type: PROFILE_TYPES.UNFOLLOW, payload: newUser })\n\n    dispatch({\n        type: GLOBALTYPES.AUTH, \n        payload: {\n            ...auth,\n            user: { \n                ...auth.user, \n                following: DeleteData(auth.user.following, newUser._id) \n            }\n        }\n    })\n   \n\n    try {\n        const res = await patchDataAPI(`user/${user._id}/unfollow`, null, auth.token)\n        socket.emit('unFollow', res.data.newUser)\n\n        // Notify\n        const msg = {\n            id: auth.user._id,\n            text: 'has started to follow you.',\n            recipients: [newUser._id],\n            url: `/profile/${auth.user._id}`,\n        }\n\n        dispatch(removeNotify({msg, auth, socket}))\n\n    } catch (err) {\n        dispatch({\n            type: GLOBALTYPES.ALERT, \n            payload: {error: err.response.data.msg}\n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}