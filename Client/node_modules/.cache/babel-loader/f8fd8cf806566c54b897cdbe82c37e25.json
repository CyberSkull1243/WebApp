{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import PostThumb from'../PostThumb';import LoadIcon from'../../images/loading.gif';import LoadMoreBtn from'../LoadMoreBtn';import{getDataAPI}from'../../utils/fetchData';import{PROFILE_TYPES}from'../../redux/actions/profileAction';var Posts=function Posts(_ref){var auth=_ref.auth,id=_ref.id,dispatch=_ref.dispatch,profile=_ref.profile;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(9),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];useEffect(function(){profile.posts.forEach(function(data){if(data._id===id){setPosts(data.posts);setResult(data.result);setPage(data.page);}});},[profile.posts,id]);var handleLoadMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,newData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"user_posts/\".concat(id,\"?limit=\").concat(page*9),auth.token);case 3:res=_context.sent;newData=_objectSpread(_objectSpread({},res.data),{},{page:page+1,_id:id});dispatch({type:PROFILE_TYPES.UPDATE_POST,payload:newData});setLoad(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PostThumb,{posts:posts,result:result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"loading\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:result,page:page,load:load,handleLoadMore:handleLoadMore})]});};export default Posts;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/components/profile/Posts.js"],"names":["React","useState","useEffect","PostThumb","LoadIcon","LoadMoreBtn","getDataAPI","PROFILE_TYPES","Posts","auth","id","dispatch","profile","posts","setPosts","result","setResult","page","setPage","load","setLoad","forEach","data","_id","handleLoadMore","token","res","newData","type","UPDATE_POST","payload"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,aAAT,KAA8B,mCAA9B,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAmC,IAAjCC,CAAAA,IAAiC,MAAjCA,IAAiC,CAA3BC,EAA2B,MAA3BA,EAA2B,CAAvBC,QAAuB,MAAvBA,QAAuB,CAAbC,OAAa,MAAbA,OAAa,eACnBX,QAAQ,CAAC,EAAD,CADW,wCACtCY,KADsC,eAC/BC,QAD+B,8BAEjBb,QAAQ,CAAC,CAAD,CAFS,yCAEtCc,MAFsC,eAE9BC,SAF8B,8BAGrBf,QAAQ,CAAC,CAAD,CAHa,yCAGtCgB,IAHsC,eAGhCC,OAHgC,8BAIrBjB,QAAQ,CAAC,KAAD,CAJa,yCAItCkB,IAJsC,eAIhCC,OAJgC,eAM7ClB,SAAS,CAAC,UAAM,CACZU,OAAO,CAACC,KAAR,CAAcQ,OAAd,CAAsB,SAAAC,IAAI,CAAI,CAC1B,GAAGA,IAAI,CAACC,GAAL,GAAab,EAAhB,CAAmB,CACfI,QAAQ,CAACQ,IAAI,CAACT,KAAN,CAAR,CACAG,SAAS,CAACM,IAAI,CAACP,MAAN,CAAT,CACAG,OAAO,CAACI,IAAI,CAACL,IAAN,CAAP,CACH,CACJ,CAND,EAOH,CARQ,CAQP,CAACL,OAAO,CAACC,KAAT,CAAgBH,EAAhB,CARO,CAAT,CAUA,GAAMc,CAAAA,cAAc,2FAAG,mJACnBJ,OAAO,CAAC,IAAD,CAAP,CADmB,sBAEDd,CAAAA,UAAU,sBAAeI,EAAf,mBAA2BO,IAAI,CAAG,CAAlC,EAAuCR,IAAI,CAACgB,KAA5C,CAFT,QAEbC,GAFa,eAGbC,OAHa,gCAGCD,GAAG,CAACJ,IAHL,MAGWL,IAAI,CAAEA,IAAI,CAAG,CAHxB,CAG2BM,GAAG,CAAEb,EAHhC,GAInBC,QAAQ,CAAC,CAACiB,IAAI,CAAErB,aAAa,CAACsB,WAArB,CAAkCC,OAAO,CAAEH,OAA3C,CAAD,CAAR,CACAP,OAAO,CAAC,KAAD,CAAP,CALmB,sDAAH,kBAAdI,CAAAA,cAAc,2CAApB,CAQA,mBACI,oCACI,KAAC,SAAD,EAAW,KAAK,CAAEX,KAAlB,CAAyB,MAAM,CAAEE,MAAjC,EADJ,CAIQI,IAAI,eAAI,YAAK,GAAG,CAAEf,QAAV,CAAoB,GAAG,CAAC,SAAxB,CAAkC,SAAS,CAAC,iBAA5C,EAJhB,cAQI,KAAC,WAAD,EAAa,MAAM,CAAEW,MAArB,CAA6B,IAAI,CAAEE,IAAnC,CACA,IAAI,CAAEE,IADN,CACY,cAAc,CAAEK,cAD5B,EARJ,GADJ,CAcH,CAtCD,CAwCA,cAAehB,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport PostThumb from '../PostThumb'\nimport LoadIcon from '../../images/loading.gif'\nimport LoadMoreBtn from '../LoadMoreBtn'\nimport { getDataAPI } from '../../utils/fetchData'\nimport { PROFILE_TYPES } from '../../redux/actions/profileAction'\n\nconst Posts = ({auth, id, dispatch, profile}) => {\n    const [posts, setPosts] = useState([])\n    const [result, setResult] = useState(9)\n    const [page, setPage] = useState(0)\n    const [load, setLoad] = useState(false)\n\n    useEffect(() => {\n        profile.posts.forEach(data => {\n            if(data._id === id){\n                setPosts(data.posts)\n                setResult(data.result)\n                setPage(data.page)\n            }\n        })\n    },[profile.posts, id])\n\n    const handleLoadMore = async () => {\n        setLoad(true)\n        const res = await getDataAPI(`user_posts/${id}?limit=${page * 9}`, auth.token)\n        const newData = {...res.data, page: page + 1, _id: id}\n        dispatch({type: PROFILE_TYPES.UPDATE_POST, payload: newData})\n        setLoad(false)\n    }\n\n    return (\n        <div>\n            <PostThumb posts={posts} result={result} />\n\n            {\n                load && <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto\" />\n            }\n\n            \n            <LoadMoreBtn result={result} page={page}\n            load={load} handleLoadMore={handleLoadMore} />\n            \n        </div>\n    )\n}\n\nexport default Posts\n"]},"metadata":{},"sourceType":"module"}