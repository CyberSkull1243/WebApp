{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"H:/Mern Stack Projects/WebApp/Server/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import Send from\"../../../images/send.svg\";import LikeButton from'../../LikeButton';import{useSelector,useDispatch}from'react-redux';import{likePost,unLikePost,savePost,unSavePost}from'../../../redux/actions/postAction';import ShareModal from'../../ShareModal';import{BASE_URL}from'../../../utils/config';var CardFooter=function CardFooter(_ref){var post=_ref.post;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLike=_useState2[0],setIsLike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadLike=_useState4[0],setLoadLike=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isShare=_useState6[0],setIsShare=_useState6[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,theme=_useSelector.theme,socket=_useSelector.socket;var dispatch=useDispatch();var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),saved=_useState8[0],setSaved=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),saveLoad=_useState10[0],setSaveLoad=_useState10[1];// Likes\nuseEffect(function(){if(post.likes.find(function(like){return like._id===auth.user._id;})){setIsLike(true);}else{setIsLike(false);}},[post.likes,auth.user._id]);var handleLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loadLike){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoadLike(true);_context.next=5;return dispatch(likePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleLike(){return _ref2.apply(this,arguments);};}();var handleUnLike=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!loadLike){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoadLike(true);_context2.next=5;return dispatch(unLikePost({post:post,auth:auth,socket:socket}));case 5:setLoadLike(false);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUnLike(){return _ref3.apply(this,arguments);};}();// Saved\nuseEffect(function(){if(auth.user.saved.find(function(id){return id===post._id;})){setSaved(true);}else{setSaved(false);}},[auth.user.saved,post._id]);var handleSavePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!saveLoad){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:setSaveLoad(true);_context3.next=5;return dispatch(savePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSavePost(){return _ref4.apply(this,arguments);};}();var handleUnSavePost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!saveLoad){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:setSaveLoad(true);_context4.next=5;return dispatch(unSavePost({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUnSavePost(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"card_footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card_icon_menu\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LikeButton,{isLike:isLike,handleLike:handleLike,handleUnLike:handleUnLike}),/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post._id),className:\"text-dark\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-comment\"})}),/*#__PURE__*/_jsx(\"img\",{src:Send,alt:\"Send\",onClick:function onClick(){return setIsShare(!isShare);}})]}),saved?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bookmark text-info\",onClick:handleUnSavePost}):/*#__PURE__*/_jsx(\"i\",{className:\"far fa-bookmark\",onClick:handleSavePost})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h6\",{style:{padding:'0 25px',cursor:'pointer'},children:[post.likes.length,\" likes\"]}),/*#__PURE__*/_jsxs(\"h6\",{style:{padding:'0 25px',cursor:'pointer'},children:[post.comments.length,\" comments\"]})]}),isShare&&/*#__PURE__*/_jsx(ShareModal,{url:\"\".concat(BASE_URL,\"/post/\").concat(post._id),theme:theme})]});};export default CardFooter;","map":{"version":3,"sources":["H:/Mern Stack Projects/WebApp/server/client/src/components/home/post_card/CardFooter.js"],"names":["React","useState","useEffect","Link","LikeButton","useSelector","useDispatch","likePost","unLikePost","savePost","unSavePost","ShareModal","BASE_URL","CardFooter","post","isLike","setIsLike","loadLike","setLoadLike","isShare","setIsShare","state","auth","theme","socket","dispatch","saved","setSaved","saveLoad","setSaveLoad","likes","find","like","_id","user","handleLike","handleUnLike","id","handleSavePost","handleUnSavePost","Send","padding","cursor","length","comments"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport Send from '../../../images/send.svg'\nimport LikeButton from '../../LikeButton'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { likePost, unLikePost, savePost, unSavePost } from '../../../redux/actions/postAction'\nimport ShareModal from '../../ShareModal'\nimport { BASE_URL } from '../../../utils/config'\n\n\nconst CardFooter = ({post}) => {\n    const [isLike, setIsLike] = useState(false)\n    const [loadLike, setLoadLike] = useState(false)\n\n    const [isShare, setIsShare] = useState(false)\n\n    const { auth, theme, socket } = useSelector(state => state)\n    const dispatch = useDispatch()\n\n    const [saved, setSaved] = useState(false)\n    const [saveLoad, setSaveLoad] = useState(false)\n\n    // Likes\n    useEffect(() => {\n        if(post.likes.find(like => like._id === auth.user._id)){\n            setIsLike(true)\n        }else{\n            setIsLike(false)\n        }\n    }, [post.likes, auth.user._id])\n\n    const handleLike = async () => {\n        if(loadLike) return;\n        \n        setLoadLike(true)\n        await dispatch(likePost({post, auth, socket}))\n        setLoadLike(false)\n    }\n\n    const handleUnLike = async () => {\n        if(loadLike) return;\n\n        setLoadLike(true)\n        await dispatch(unLikePost({post, auth, socket}))\n        setLoadLike(false)\n    }\n\n\n    // Saved\n    useEffect(() => {\n        if(auth.user.saved.find(id => id === post._id)){\n            setSaved(true)\n        }else{\n            setSaved(false)\n        }\n    },[auth.user.saved, post._id])\n\n    const handleSavePost = async () => {\n        if(saveLoad) return;\n        \n        setSaveLoad(true)\n        await dispatch(savePost({post, auth}))\n        setSaveLoad(false)\n    }\n\n    const handleUnSavePost = async () => {\n        if(saveLoad) return;\n\n        setSaveLoad(true)\n        await dispatch(unSavePost({post, auth}))\n        setSaveLoad(false)\n    }\n\n    return (\n        <div className=\"card_footer\">\n            <div className=\"card_icon_menu\">\n                <div>\n                    <LikeButton \n                    isLike={isLike}\n                    handleLike={handleLike}\n                    handleUnLike={handleUnLike}\n                    />\n\n                    <Link to={`/post/${post._id}`} className=\"text-dark\">\n                        <i className=\"far fa-comment\" />\n                    </Link>\n\n                    <img src={Send} alt=\"Send\" onClick={() => setIsShare(!isShare)} />\n                </div>\n\n                {\n                    saved \n                    ?  <i className=\"fas fa-bookmark text-info\"\n                    onClick={handleUnSavePost} />\n\n                    :  <i className=\"far fa-bookmark\"\n                    onClick={handleSavePost} />\n                }\n               \n            </div>\n\n            <div className=\"d-flex justify-content-between\">\n                <h6 style={{padding: '0 25px', cursor: 'pointer'}}>\n                    {post.likes.length} likes\n                </h6>\n                \n                <h6 style={{padding: '0 25px', cursor: 'pointer'}}>\n                    {post.comments.length} comments\n                </h6>\n            </div>\n\n            {\n                isShare && <ShareModal url={`${BASE_URL}/post/${post._id}`} theme={theme} />\n            }\n        </div>\n    )\n}\n\nexport default CardFooter\n"]},"metadata":{},"sourceType":"module"}